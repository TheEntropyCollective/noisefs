<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - NoiseFS Announcements</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1 class="logo">NoiseFS Announcements</h1>
            <ul class="nav-links">
                <li><a href="/dashboard" class="active">Dashboard</a></li>
                <li><a href="/">Recent</a></li>
                <li><a href="/topics">Topics</a></li>
                <li><a href="/search">Search</a></li>
            </ul>
        </div>
    </nav>

    <main class="container dashboard">
        <!-- Real-time Stats Grid -->
        <section class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-content">
                    <h3>Total Announcements</h3>
                    <div class="stat-number" id="totalAnnouncements">-</div>
                    <div class="stat-change positive" id="announcementChange">+0 today</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üîî</div>
                <div class="stat-content">
                    <h3>Active Subscriptions</h3>
                    <div class="stat-number" id="activeSubscriptions">-</div>
                    <div class="stat-change" id="subscriptionChange">0 topics</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üåê</div>
                <div class="stat-content">
                    <h3>Network Activity</h3>
                    <div class="stat-number" id="networkActivity">-</div>
                    <div class="stat-change" id="activityChange">per hour</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üè∑Ô∏è</div>
                <div class="stat-content">
                    <h3>Unique Tags</h3>
                    <div class="stat-number" id="uniqueTags">-</div>
                    <div class="stat-change" id="tagChange">discovered</div>
                </div>
            </div>
        </section>

        <!-- Charts Row -->
        <section class="charts-row">
            <div class="chart-container">
                <h3>Announcements Over Time</h3>
                <canvas id="timelineChart"></canvas>
            </div>
            
            <div class="chart-container">
                <h3>Category Distribution</h3>
                <canvas id="categoryChart"></canvas>
            </div>
        </section>

        <!-- Live Feed and Tag Cloud -->
        <section class="content-row">
            <div class="live-feed">
                <h3>Live Announcement Feed</h3>
                <div id="liveFeed" class="feed-container">
                    <!-- Live announcements will be inserted here -->
                </div>
            </div>
            
            <div class="tag-cloud-container">
                <h3>Popular Tags</h3>
                <div id="tagCloud" class="tag-cloud">
                    <!-- Tag cloud will be generated here -->
                </div>
            </div>
        </section>

        <!-- Topic Hierarchy Visualization -->
        <section class="topic-viz-section">
            <h3>Topic Hierarchy</h3>
            <div id="topicTree" class="topic-tree">
                <!-- Interactive topic tree will be rendered here -->
            </div>
        </section>

        <!-- Network Health -->
        <section class="network-health">
            <h3>Network Health</h3>
            <div class="health-metrics">
                <div class="health-metric">
                    <label>DHT Status</label>
                    <div class="health-bar">
                        <div class="health-fill good" id="dhtHealth" style="width: 0%"></div>
                    </div>
                    <span class="health-value" id="dhtValue">-</span>
                </div>
                <div class="health-metric">
                    <label>PubSub Status</label>
                    <div class="health-bar">
                        <div class="health-fill good" id="pubsubHealth" style="width: 0%"></div>
                    </div>
                    <span class="health-value" id="pubsubValue">-</span>
                </div>
                <div class="health-metric">
                    <label>Storage Usage</label>
                    <div class="health-bar">
                        <div class="health-fill warning" id="storageHealth" style="width: 0%"></div>
                    </div>
                    <span class="health-value" id="storageValue">-</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Live Feed Item Template -->
    <template id="feedItemTemplate">
        <div class="feed-item">
            <div class="feed-time"></div>
            <div class="feed-content">
                <span class="feed-category"></span>
                <span class="feed-topic"></span>
                <div class="feed-tags"></div>
            </div>
        </div>
    </template>

    <script src="/static/js/app.js"></script>
    <script src="/static/js/dashboard.js"></script>
</body>
</html>